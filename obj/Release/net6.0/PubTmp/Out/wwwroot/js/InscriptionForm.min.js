function SetUpValidationRules(){jQuery.validator.addMethod("PostalCode",function(n,t){return this.optional(t)||/^[\w\s\-]*$/i.test(n)},"")}function ChangeValidationRulesForIndiaPhones(n,t,i){n=="in"?($(t).attr("maxlength",i),$(t).rules("remove","minlength"),$(t).rules("remove","maxlength"),$(t).rules("add",{minlength:i,maxlength:i,messages:{minlength:i+" digits are required.",maxlength:i+" digits are required."}})):($(t).attr("maxlength","14"),$(t).rules("remove","minlength"),$(t).rules("remove","maxlength"),$(t).rules("add",{minlength:10,maxlength:14,messages:{minlength:"Se requieren al menos 10 dígitos.",maxlength:"No more than 14 digits are required."}}))}function SetResponse(n,t){$("#divSaveStudentDetails").html(n);setTimeout(function(){$("#divSaveStudentDetails").html("")},3e3);$("#btnSaveStudentDetails").html(t).removeAttr("disabled")}function GetInscriptoData(){try{var n={},t="",i=window.location.protocol+"//"+window.location.host+window.location.pathname;return urlPlusQS=t==null|t==""?i:i+"?"+t,n.crmLeadId=$("#crmLeadId").val(),n.UsuarioId=$("#UsuarioId").val(),n.Accion="save",n.AnioIngreso=$("#txtFechaEntregaDiploma1").val(),n.AnioEgreso=$("#txtFechaEntregaDiploma1").val(),n.ApellidoMaterno=$("#txtLastNameMaterno").val(),n.ApellidoPaterno=$("#txtLastNamePaterno").val(),n.Area=$("#txtArea").val(),n.Calle=$("#txtAddress").val(),n.CalleTrabajo=$("#txtCompanyAddress").val(),n.Cargo=$("#txtCargo").val(),n.Celular=$("#txtMovil").val(),n.CiudadId=$("#txtCiudad").val(),n.CiudadEstudio=$("#txtCiudadEstudio1").val(),n.Clave=$("#txtPass").val(),n.CodigoPostal=$("#txtCodigoPostal").val(),n.CountryCode=$("#celularCountry").val(),n.Email=$("#txtEmail").val(),n.EmailAlternativo=$("#txtEmailAlt").val(),n.Empresa=$("#txtCompany").val(),n.EstadoId=$("#txtEstado").val(),n.EstadoEstudio=$("#txtEstadoEstudio1").val(),n.EstadoIdDondeEstudio=$("#txtEstadoEstudio1").val(),n.FechaNacimiento=$("#txtBirthday").val(),n.GPA=$("#txtPromedio1").val(),n.LInstitutionCode="SNHU.edu",n.Localidad=$("#txtEstadoTexto").val(),$("#txtCiudadTexto").val()!=""&&(n.Localidad+=" | "+$("#txtCiudadTexto").val()),n.LocalidadCorrespondencia=$("#txtEstadoEstudioTexto1").val(),$("#txtCiudadEstudioTexto1").val()!=""&&(n.LocalidadCorrespondencia+=" | "+$("#txtCiudadEstudioTexto1").val()),n.NacionalidadId=$("#txtCountry").val(),n.NivelEducativoId=$("#txtNivelEducativo1").val(),n.NombreColegio=$("#txtNombreColegio1").val(),n.Nombres=$("#txtName").val(),n.NumeroDocumento=$("#txtNoDoc").val(),n.PaisId=$("#txtPais").val(),n.PaisIdDondeEstudio=$("#txtPaisEstudio1").val(),n.PaisIdNacimiento=$("#txtPaisNacimiento").val(),n.PeriodoIngresoId=$("#txtPeriodoIngreso").val(),n.ProgramaId=$("#txtProgramCode").val(),n.Promedio=$("#txtPromedio1").val(),n.Provincia=$("#txtEstado").val(),n.Sexo=$("#txtSexo").val(),n.SituacionLaboral=$("#txtSituacionLaboral").val(),n.Source="",n.SubSource="",n.Telefono=$("#txtTelefono").val(),n.TipoDocumento=$("#txtTipoDocumento").val(),n.TituloObtenido=$("#txtAreaEstudio1").val(),n.Universidad_EstadoAdmision="No Procesado",n.WebUrl=window.location.href,n.AntecedentesAcademicos=JSON.stringify(GetAntecedentesAcademicos()),n}catch(r){alert("Error in GetInscriptoData(): "+r)}}$(document).ready(function(){var n=$("#StudentDetailsForm").validate({highlight:function(n){$(n).addClass("fieldError")},unhighlight:function(n){$(n).removeClass("fieldError")}});$("#StudentDetailsForm").length!=0&&SetUpValidationRules();$("#txtMovil").focus(function(){$(this).keydown(function(n){n.keyCode==46||n.keyCode==8||n.keyCode==9||n.keyCode==27||n.keyCode==13||n.keyCode==65&&n.ctrlKey===!0||n.keyCode>=35&&n.keyCode<=39||(n.shiftKey||(n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105))&&n.preventDefault()})});$("#txtTelefono").focus(function(){$(this).keydown(function(n){n.keyCode==46||n.keyCode==8||n.keyCode==9||n.keyCode==27||n.keyCode==13||n.keyCode==65&&n.ctrlKey===!0||n.keyCode>=35&&n.keyCode<=39||(n.shiftKey||(n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105))&&n.preventDefault()})});$("#btnSaveStudentDetails").click(function(){var t=$("#btnSaveStudentDetails").html(),i,n,r;if($("#btnSaveStudentDetails").html("PLEASE WAIT...").attr("disabled",!0),i=$("#StudentDetailsForm").validate(),n="",i.form()){if(r=GetInscriptoData(),r)try{$.ajax({type:"POST",url:"/ajax/saveinscriptos",dataType:"json","async":!0,data:r}).done(function(i){i.status==="OK"?(n+="<div class='alert alert-success'>",n+="<strong>OK: <\/strong>"+i.description,n+="<\/div>",SetResponse(n,t)):(n+="<div class='alert alert-danger'>",n+="<strong>Error: <\/strong>"+i.description,n+="<\/div>",SetResponse(n,t))}).fail(function(i,r,u){$("#btnSaveStudentDetails").html(t).removeAttr("disabled");var f="";i.status!=200&&(f=u===""?"No se pudo realizar esta operación.":u);n+="<div class='alert alert-danger'>";n+="<strong>Error: <\/strong>"+f;n+="<\/div>";SetResponse(n,t)})}catch(u){n+="<div class='alert alert-danger'>";n+="<strong>Error: <\/strong>"+u;n+="<\/div>";SetResponse(n,t)}}else i.focusInvalid()})});